<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Big Box Categories</title>
		<meta name="viewport" content="width=device-width; initial-scale=1.0" />
		<link rel="stylesheet" href="../css/jquery.mobile-1.3.1.css" />
		<link  rel="stylesheet" type="text/css" href="../css/custom.css"/>
		<script src="../js/jquery-1.10.2.js"></script>
		<script src="../js/jquery.mobile-1.3.1.js"></script>
		<script src="../appjs/item.js"></script>
		<script src="../appjs/app.js"></script>
		<script src="../raty/jquery.raty.min.js"></script>
		<script src="../raty/jquery.raty.js"></script>
	</head>
	<body>
		<!-- homepage -->
		<div data-role="page" id="categories">
			<div data-role="header" >
				<a data-role="button" data-rel="back"> Back </a>
				<h1>Add Categories</h1>
			</div>
			

					<SCRIPT language="javascript">
					var nextId = 0;
					//No va a estar aqui es por testing
	/*					function add(type) {
								
							//Create an input type dynamically.
							//var element = document.createElement("input");
							//var element2 = document.createElement("input");

							//Assign different attributes to the element.
							//element.setAttribute("type", "input");
							//element.setAttribute("value", type);
							//element.setAttribute("name", type);
							
							//element.setAttribute("placeholder", type);
							//element2.setAttribute("type", "button");
							//element2.setAttribute("value", "x");
							
							//var inputBar = document.getElementById("inputBar");
							$('subCategory').selectmenu('disable');
							if(type == "category"){
								$("<div id='"+nextId+"' align = 'left'>\
									<input  placeholder='Category'/>\
									<input type='checkbox' name='' id='' class='' data-role=''>\
									</div>").appendTo("#inputBar");
									}					
							else if(type == "subcategory"){
								$("<div id='"+nextId+"' align = 'center'>\
									<input  placeholder='Subcategory'/>\
									<input type='checkbox' name='' id='' class='' data-role=''>\
									</div>").appendTo("#inputBar");
									}
									else{
								$("<div id='"+nextId+"' align = 'right'>\
									<input  placeholder='2 subcategory'/>\
									<input type='checkbox' name='' id='' class='' data-role=''>\
									</div>").appendTo("#inputBar");
									}
								nextId++;
							//Append the element in page (in div).
							//inputBar.appendChild(element);
							//inputBar.appendChild(element2);
						
						}*/
	 var intId = 0;
	 var intId2 = 0;
	 var intId3 = 0;
	 
        function add(type) {
           
          
          	if(type == "category"){
          		 ///intId = $("#DynamicForm div").length + 1;
          		 ++intId;
          		 intId2= 0;
          		 intId3 = 0;
          		 var fieldWrapper = $("<div align= 'left' class='fieldwrapper' id='fieldC" + intId + "'/>");
          		 $("#subcategory").removeAttr('disabled');
          		 $("#2subcategory").attr("disabled","disabled");
          		 //$("#subcategory").attr("disabled","disabled");
             	 //$("#2subcategory").removeAttr('disabled');
          	}
          	else if(type == "subcategory"){
          		
          		 ++intId2;
          		 intId3 = 0;
          		 var fieldWrapper = $("<div align= 'center' class='fieldwrapper' id='fieldS" + intId+""+intId2 + "'/>");
          		 $("#2subcategory").removeAttr('disabled');
          	}
          	else{
          		++intId3;
          		var fieldWrapper = $("<div align= 'right' class='fieldwrapper' id='fieldSS" + intId+""+intId2 +""+intId3 + "'/>");
          	}
            var inputBar = $("<input placeholder='"+type+"' type='text' name='inputTag[]' class='required' />");
            var removeButton = $("<input type='radio' class='remove'  />");
            removeButton.click(function() {
            
            	if($(this).parent().attr("id").charAt(5)=="C")
            	{
            		
          			 for(var i = 1; i<= 50 ;i++){
          			 	for(var j = 1; j<= 50 ;j++){
            				if(document.getElementById("fieldSS"+$(this).parent().attr("id").charAt(6)+""+i+""+j) != null){
            					$('#fieldSS'+$(this).parent().attr("id").charAt(6)+""+i+""+j).remove();
            					intId3 = 0;
            				}
            				//else{break;}
            		  	}
            		  if(document.getElementById("fieldS"+$(this).parent().attr("id").charAt(6)+""+i) != null){
            				$('#fieldS'+$(this).parent().attr("id").charAt(6)+""+i).remove();
            				intId2 = 0;
            			}
            		 	//else{break;}
            		}	
            		intId--;
            		 $("#subcategory").removeAttr('disabled');
          			 $("#2subcategory").attr("disabled","disabled");
            	}
            	else if($(this).parent().attr("id").charAt(5)=="S")
            	{
            		
          			 
          			 	for(var j = 1; j<= 50 ;j++){
            				if(document.getElementById("fieldSS"+$(this).parent().attr("id").charAt(6)+""+$(this).parent().attr("id").charAt(7)+""+j) != null){
            					$('#fieldSS'+$(this).parent().attr("id").charAt(6)+""+$(this).parent().attr("id").charAt(7)+""+j).remove();
            					intId3 = 0;
            				}
            				//else{break;}
            		  	
            		}	
            		
            		 $("#subcategory").removeAttr('disabled');
          			 $("#2subcategory").attr("disabled","disabled");
            	}
            	
            	 //alert($(this).parent().attr("id"));
            	if(intId==1){
            	//alert("true");
            	//$("#category").selected=true;
            	//refresh and force rebuild
				
            	$("#subcategory").attr("disabled","disabled");
          		$("#2subcategory").attr("disabled","disabled");
          		//$("#select").selectmenu("refresh");
          		
          		}
            	//alert($(this).parent().attr("id").charAt(5));
            	//alert($(this).parent().attr("id"));
            	//alert(document.getElementById("fieldS1"));
            	/*if(document.getElementById("fieldS1")!=null)
            	{
            		$('#fieldS1').remove();
            		//document.getElementById("fieldS1").remove();
            	}
            	else{alert(false);}
            	*/
            	//document.getElementById("fieldS1").remove();
            	
                $(this).parent().remove();
            }); 
            fieldWrapper.append(inputBar);
            fieldWrapper.append(removeButton);
            
            
           
            $("#DynamicForm").append(fieldWrapper);
        };
    
    

						
					</SCRIPT>
					
				
					
					<FORM>
						
						<H2>Dynamically add new category.</H2>
						<SELECT id="select" name="element" >
							<OPTION id="category" value="category">Category</OPTION>
							<OPTION id="subcategory" value="subcategory"disabled>Subcategory</OPTION>
							<OPTION id="2subcategory" value="2nd subcategory"disabled>Second Subcategory</OPTION>
						</SELECT>

						
					
					</FORM>	
						<div id="inputBar" align="center"></div>
						
						
					<form id="config" method="post" action="config.php" >
						<input type="button" value="Add a field" onclick="add(document.forms[0].element.value)">
    					<fieldset id="DynamicForm">
   						</fieldset>
  						
  						<INPUT type="button" value="Save">
					</form>
					
					
			
	</body>
</html>